<!doctype html>
<html lang="en" data-theme="mono-slate">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TREKULATE v0.1 - Holographic Journey</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sofluous/DesignSystemizer@main/theme.css" onerror="this.onerror=null;this.href='../_DesignSystem/theme.css';">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/iconoir-icons/iconoir@main/css/iconoir.css">
  <style>
    :root {
      --tk-panel-w: 392px;
      --tk-shell-gap: var(--ds-space-3, 12px);
      --tk-shell-pad: var(--ds-space-3, 10px);
      --tk-panel-blur: 8px;
      --tk-header-pad-y: var(--ds-space-3, 14px);
      --tk-header-pad-x: var(--ds-space-4, 16px);
      --tk-header-pad-bottom: var(--ds-space-3, 12px);
      --tk-control-pad-y: 6px;
      --tk-control-pad-x: 6px;
      --tk-control-gap: 6px;
      --tk-group-pad: 6px;
      --tk-group-gap: 4px;
      --tk-field-gap: 3px;
      --tk-row-gap: var(--ds-space-2, 8px);
      --tk-input-pad-y: 6px;
      --tk-input-pad-x: 8px;
      --tk-input-color-h: 24px;
      --tk-textarea-min-h: 130px;
      --tk-btn-pad-y: 8px;
      --tk-btn-pad-x: 10px;
      --tk-theme-switch-w: 100%;
      --tk-hud-inset: 10px;
      --tk-hud-pad-y: 8px;
      --tk-hud-pad-x: 10px;
      --tk-footer-pad-top: var(--ds-space-2, 8px);
      --tk-shell-breakpoint: 1080px;
      --tk-panel-mobile-min-h: 300px;
      --tk-fs-title: var(--ds-fs-4, 1.06rem);
      --tk-fs-subtle: var(--ds-fs-1, 0.82rem);
      --tk-fs-label: var(--ds-fs-2, 0.86rem);
      --tk-fs-body-mono: var(--ds-fs-1, 0.78rem);
      --tk-fs-footer: var(--ds-fs-1, 0.76rem);
      --tk-lh-body-mono: 1.35;
      --tk-letter-title: 0.12em;
      --tk-letter-subtle: 0.08em;
      --tk-letter-label: 0.02em;
      --tk-letter-button: 0.04em;
      --tk-radius-group: var(--ds-radius-2, 10px);
      --bg-0: var(--ds-bg, #051216);
      --bg-1: var(--ds-bg-elevated, #0a1f2b);
      --panel: color-mix(in oklab, var(--ds-bg-elevated, #0a1f2b) 78%, transparent);
      --line: color-mix(in oklab, var(--ds-accent, #55e9ff) 38%, transparent);
      --text: var(--ds-text, #daf7ff);
      --accent: var(--ds-accent, #55e9ff);
      --accent-2: var(--ds-info, #7dffcf);
      --danger: var(--ds-danger, #ff7070);
      --shadow: var(--ds-card-shadow, 0 0 18px rgba(85, 233, 255, 0.35));
      --radius: var(--ds-radius-3, 14px);
      --font-ui: var(--ds-font-sans, "Inter", "Segoe UI", Roboto, Arial, sans-serif);
      --font-display: var(--ds-font-sans, "Inter", "Segoe UI", Roboto, Arial, sans-serif);
      --fx-shell-glow-a: color-mix(in oklab, var(--accent) 20%, transparent);
      --fx-shell-glow-b: color-mix(in oklab, var(--accent-2) 16%, transparent);
      --fx-header-top: color-mix(in oklab, var(--accent) 18%, transparent);
      --fx-header-bottom: transparent;
      --fx-group-bg: color-mix(in oklab, var(--ds-bg-overlay, rgba(0,0,0,0.25)) 55%, transparent);
      --fx-control-border: color-mix(in oklab, var(--accent) 42%, var(--line));
      --fx-control-bg: color-mix(in oklab, var(--ds-bg-raised, #021318) 85%, transparent);
      --fx-btn-border: color-mix(in oklab, var(--accent) 58%, var(--line));
      --fx-btn-bg-top: color-mix(in oklab, var(--accent) 22%, transparent);
      --fx-btn-bg-bottom: color-mix(in oklab, var(--accent) 8%, transparent);
      --fx-danger-border: color-mix(in oklab, var(--danger) 72%, var(--line));
      --fx-danger-bg-top: color-mix(in oklab, var(--danger) 26%, transparent);
      --fx-danger-bg-bottom: color-mix(in oklab, var(--danger) 8%, transparent);
      --fx-viewer-bg-a: color-mix(in oklab, var(--accent) 16%, transparent);
      --fx-viewer-bg-b: color-mix(in oklab, var(--accent-2) 12%, transparent);
      --fx-viewer-bg-base: color-mix(in oklab, var(--ds-bg-raised, #020c0f) 92%, transparent);
      --fx-hud-bg: color-mix(in oklab, var(--ds-bg-elevated, #041218) 70%, transparent);
      --tk-country-outline: color-mix(in oklab, var(--accent-2) 42%, transparent);
      --tk-country-shadow: color-mix(in oklab, var(--accent) 72%, white 12%);
      --tk-scanline: color-mix(in oklab, var(--accent) 14%, transparent);
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      width: 100%;
      height: 100%;
      background:
        radial-gradient(1200px 800px at 85% -20%, var(--fx-shell-glow-a), transparent 60%),
        radial-gradient(900px 700px at -15% 120%, var(--fx-shell-glow-b), transparent 50%),
        linear-gradient(160deg, var(--bg-0), var(--bg-1));
      color: var(--text);
      font-family: var(--font-ui);
      overflow: hidden;
    }

    .shell {
      display: grid;
      grid-template-columns: var(--tk-panel-w) 1fr;
      grid-template-rows: 1fr auto;
      gap: var(--tk-shell-gap);
      width: 100%;
      height: 100%;
      padding: var(--tk-shell-pad);
    }

    .panel {
      background: var(--panel);
      border: var(--ds-border-w, 1px) var(--ds-border-style, solid) var(--line);
      border-radius: var(--radius);
      backdrop-filter: blur(var(--tk-panel-blur));
      box-shadow: var(--shadow);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 0;
      grid-column: 1;
      grid-row: 1 / span 2;
      min-width: 0;
    }

    .header {
      padding: var(--tk-header-pad-y) var(--tk-header-pad-x) var(--tk-header-pad-bottom);
      border-bottom: var(--ds-border-w, 1px) var(--ds-border-style, solid) var(--line);
      display: flex;
      align-items: baseline;
      justify-content: flex-start;
      background: linear-gradient(180deg, var(--fx-header-top), var(--fx-header-bottom));
      gap: var(--ds-space-2);
    }

    .title {
      margin: 0;
      font-family: var(--font-display);
      letter-spacing: 0.03em;
      font-size: var(--ds-fs-3, 16px);
      font-weight: 600;
    }

    .subtle {
      font-size: var(--ds-fs-1, 12px);
      opacity: 0.85;
      letter-spacing: var(--ds-label-spacing, 0.06em);
      text-transform: var(--ds-label-transform, uppercase);
      color: var(--ds-text-muted);
    }

    .panel-body {
      display: grid;
      grid-template-columns: 44px 1fr;
      min-height: 0;
      flex: 1;
      min-width: 0;
    }

    .controls {
      overflow: auto;
      padding: var(--tk-control-pad-y) var(--tk-control-pad-x) var(--tk-control-pad-x);
      display: block;
      min-height: 0;
      height: 100%;
      min-width: 0;
      overflow-x: hidden;
    }

    .tabs {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      padding: 8px 6px;
      border-right: var(--ds-border-w) var(--ds-border-style) var(--line);
      background: color-mix(in oklab, var(--panel) 86%, transparent);
    }

    .tab-btn {
      width: 32px;
      min-height: 32px;
      padding: 0;
      font-size: 12px;
      line-height: 1;
      font-weight: 700;
      margin: 0;
    }

    .tab-btn i,
    .timeline-bar .ds-btn i {
      font-size: 16px;
      line-height: 1;
      display: inline-block;
      vertical-align: middle;
    }

    .tab-btn[aria-selected="true"],
    .tab-btn.is-active {
      border-color: var(--ds-accent);
      background: color-mix(in oklab, var(--ds-accent) 16%, var(--ds-btn-bg));
      color: var(--ds-accent);
    }

    .tab-btn.is-active i,
    .tab-btn[aria-selected="true"] i {
      color: var(--ds-accent);
    }

    .control-tab[hidden] {
      display: none;
    }

    .control-tab {
      display: grid;
      gap: var(--tk-control-gap);
      align-content: start;
      align-items: start;
      min-height: 0;
    }

    #panelMapping {
      grid-template-rows: auto auto minmax(0, 1fr);
      height: 100%;
    }

    .group {
      display: grid;
      gap: var(--tk-group-gap);
      border: var(--ds-border-w) var(--ds-border-style) var(--line);
      border-radius: var(--ds-radius-2);
      padding: var(--tk-group-pad);
      background: color-mix(in oklab, var(--panel) 92%, transparent);
      min-width: 0;
      align-content: start;
      align-self: start;
      height: auto;
    }

    .group h3 {
      margin: 0;
      font-family: var(--font-display);
      font-size: var(--ds-fs-2, 14px);
      letter-spacing: 0.01em;
      text-transform: none;
      color: var(--text);
      font-weight: 600;
    }

    .group-head {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 6px;
    }

    .panel-help {
      min-height: 22px;
      width: 22px;
      padding: 0;
      margin: 0;
      font-size: 0;
    }

    .panel-help i {
      font-size: 13px;
      color: var(--ds-text-muted);
    }

    label {
      display: grid;
      gap: 6px;
      font-size: var(--ds-fs-1);
      letter-spacing: var(--ds-label-spacing);
      text-transform: var(--ds-label-transform);
      color: var(--ds-text-muted);
    }

    .row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--tk-row-gap);
      min-width: 0;
      align-items: start;
    }

    .controls .ds-input,
    .controls .ds-select,
    .controls .ds-textarea {
      font-size: var(--ds-fs-2);
    }

    .controls input[type="color"] {
      width: 100%;
      min-height: var(--tk-input-color-h);
      height: var(--tk-input-color-h);
      border: var(--ds-border-w) var(--ds-border-style) var(--ds-input-border);
      border-radius: var(--ds-radius-2);
      background: var(--ds-input-bg);
      padding: 2px;
      cursor: pointer;
    }

    .controls input[type="range"] {
      width: 100%;
      accent-color: var(--ds-accent);
    }

    .controls textarea {
      resize: vertical;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-end;
      gap: var(--tk-row-gap);
      min-width: 0;
    }

    .btn-row .ds-btn {
      flex: 0 0 auto;
    }

    .group .ds-btn {
      min-height: 30px;
      padding: 0 8px;
      margin: 0;
      font-size: 11px;
      letter-spacing: 0.01em;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .theme-switch {
      width: var(--tk-theme-switch-w);
    }

    .viewer {
      position: relative;
      grid-column: 2;
      grid-row: 1;
      border-radius: var(--radius);
      border: var(--ds-border-w, 1px) var(--ds-border-style, solid) var(--line);
      overflow: hidden;
      box-shadow: var(--shadow);
      background:
        radial-gradient(55% 55% at 30% 10%, var(--fx-viewer-bg-a), transparent 70%),
        radial-gradient(45% 45% at 90% 90%, var(--fx-viewer-bg-b), transparent 70%),
        var(--fx-viewer-bg-base);
      min-width: 0;
    }

    canvas {
      width: 100%;
      height: 100%;
      display: block;
    }

    .hud {
      position: absolute;
      inset: var(--tk-hud-inset) var(--tk-hud-inset) auto auto;
      border: var(--ds-border-w, 1px) var(--ds-border-style, solid) var(--line);
      background: var(--fx-hud-bg);
      padding: var(--tk-hud-pad-y) var(--tk-hud-pad-x);
      border-radius: var(--ds-radius-2, 10px);
      font-size: var(--tk-fs-body-mono);
      line-height: var(--tk-lh-body-mono);
      text-align: right;
      letter-spacing: var(--tk-letter-button);
    }

    .footer {
      font-size: var(--ds-fs-1);
      opacity: 0.86;
      border-top: var(--ds-border-w, 1px) var(--ds-border-style, solid) var(--line);
      padding-top: var(--tk-footer-pad-top);
      color: var(--ds-text-muted);
      text-transform: none;
      letter-spacing: 0;
    }

    .controls::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    .controls::-webkit-scrollbar-thumb {
      border-radius: 10px;
      background: color-mix(in oklab, var(--ds-accent) 55%, var(--ds-bg-raised));
      border: 2px solid transparent;
      background-clip: content-box;
    }

    .controls::-webkit-scrollbar-track {
      background: transparent;
    }

    .pin-list::-webkit-scrollbar,
    .controls textarea::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    .pin-list::-webkit-scrollbar-thumb,
    .controls textarea::-webkit-scrollbar-thumb {
      border-radius: 10px;
      background: color-mix(in oklab, var(--ds-accent) 55%, var(--ds-bg-raised));
      border: 2px solid transparent;
      background-clip: content-box;
    }

    .pin-list::-webkit-scrollbar-track,
    .controls textarea::-webkit-scrollbar-track {
      background: transparent;
    }

    .timeline-bar {
      grid-column: 2;
      grid-row: 2;
      display: grid;
      grid-template-columns: 34px 34px 34px 140px 1fr;
      align-items: center;
      gap: 6px;
      padding: 8px;
      border: var(--ds-border-w) var(--ds-border-style) var(--line);
      border-radius: var(--radius);
      background: var(--panel);
      backdrop-filter: blur(var(--tk-panel-blur));
      box-shadow: var(--shadow);
      min-width: 0;
    }

    .timeline-slider-wrap {
      display: grid;
      gap: 4px;
      min-width: 0;
    }

    .timeline-track-wrap {
      position: relative;
      min-height: 16px;
      display: flex;
      align-items: center;
    }

    .timeline-markers {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .timeline-marker {
      position: absolute;
      top: 3px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      border: 1px solid color-mix(in oklab, var(--ds-accent) 78%, white 10%);
      background: color-mix(in oklab, var(--ds-accent) 54%, transparent);
      box-shadow: 0 0 4px color-mix(in oklab, var(--ds-accent) 62%, transparent);
      transform: translateX(-50%);
      pointer-events: auto;
      cursor: pointer;
    }

    .timeline-marker.is-active {
      background: color-mix(in oklab, var(--ds-accent-strong, var(--ds-accent)) 84%, white 16%);
      box-shadow: 0 0 7px color-mix(in oklab, var(--ds-accent) 82%, transparent);
    }

    #panelRaw {
      height: 100%;
      min-height: 0;
      align-content: stretch;
      align-items: stretch;
    }

    .raw-json-group {
      height: 100%;
      min-height: 0;
      align-self: stretch;
      display: grid;
      grid-template-rows: auto minmax(0, 1fr);
    }

    #rawJsonView {
      height: 100%;
      min-height: 0;
      resize: none;
      scrollbar-width: thin;
      scrollbar-color: color-mix(in oklab, var(--ds-accent) 55%, var(--ds-bg-raised)) transparent;
    }

    .render-stack {
      display: grid;
      gap: 6px;
      align-content: start;
    }

    .render-group {
      display: grid;
      gap: 4px;
      padding-top: 4px;
      border-top: var(--ds-border-w) var(--ds-border-style) color-mix(in oklab, var(--line) 70%, transparent);
    }

    .render-group:first-child {
      border-top: 0;
      padding-top: 0;
    }

    .render-group h4 {
      margin: 0;
      font-size: 11px;
      font-weight: 600;
      color: var(--ds-text-muted);
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .render-row {
      display: grid;
      grid-template-columns: 24px 1fr;
      gap: 6px;
      align-items: center;
      min-height: 0;
    }

    .render-row.color-only {
      grid-template-columns: 1fr;
    }

    .mini-key {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: var(--ds-text-muted);
    }

    .mini-key i {
      font-size: 14px;
      line-height: 1;
    }

    .pin-list {
      max-height: none;
      min-height: 120px;
      height: 100%;
      overflow: auto;
      padding: 0;
      border-top: var(--ds-border-w) var(--ds-border-style) color-mix(in oklab, var(--line) 78%, transparent);
      border-bottom: var(--ds-border-w) var(--ds-border-style) color-mix(in oklab, var(--line) 78%, transparent);
      scrollbar-width: thin;
      scrollbar-color: color-mix(in oklab, var(--ds-accent) 55%, var(--ds-bg-raised)) transparent;
    }

    .pin-table {
      width: 100%;
      border-collapse: collapse;
      table-layout: fixed;
      font-size: 11px;
    }

    .pin-table th,
    .pin-table td {
      padding: 5px 6px;
      border-bottom: var(--ds-border-w) var(--ds-border-style) color-mix(in oklab, var(--line) 64%, transparent);
      text-align: left;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .pin-table th {
      position: sticky;
      top: 0;
      z-index: 1;
      background: color-mix(in oklab, var(--panel) 95%, transparent);
      color: var(--ds-text-muted);
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .pin-row {
      cursor: pointer;
    }

    .pin-row.is-selected {
      background: color-mix(in oklab, var(--ds-accent) 15%, transparent);
      color: var(--ds-accent);
      box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--ds-accent) 50%, transparent);
    }

    .pin-empty {
      font-size: 11px;
      color: var(--ds-text-muted);
      padding: 8px 6px;
    }

    .camera-stack {
      display: grid;
      gap: 4px;
      align-content: start;
    }

    .camera-row {
      display: grid;
      grid-template-columns: 24px 1fr;
      gap: 6px;
      align-items: center;
    }

    .camera-actions {
      display: grid;
      grid-template-columns: 1fr;
      gap: 4px;
    }

    .camera-presets {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 4px;
    }

    .camera-presets .ds-btn {
      min-width: 0;
      padding: 0 6px;
    }

    .meta-actions {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-end;
      gap: 6px;
    }

    .meta-actions .ds-btn {
      flex: 0 0 auto;
    }

    .pins-meta-group {
      min-height: 0;
      height: 100%;
      align-self: stretch;
      display: grid;
      grid-template-rows: auto minmax(0, 1fr) auto auto;
    }

    .metadata-block {
      display: grid;
      gap: 4px;
      align-content: end;
    }

    .mapping-route-row {
      position: sticky;
      top: 0;
      z-index: 3;
      padding: 6px;
      border-top: var(--ds-border-w) var(--ds-border-style) var(--line);
      border-bottom: var(--ds-border-w) var(--ds-border-style) var(--line);
      display: grid;
      gap: 6px;
      background: color-mix(in oklab, var(--panel) 96%, transparent);
    }

    .panel-status {
      font-size: 11px;
      color: var(--ds-text-muted);
      min-height: 16px;
    }

    #pinSource {
      font-size: 11px;
      color: var(--ds-text-muted);
      min-height: 16px;
    }

    .toast-wrap {
      position: fixed;
      right: 12px;
      bottom: 12px;
      z-index: var(--ds-z-toast, 500);
      display: grid;
      gap: 6px;
      max-width: 320px;
    }

    .toast {
      border: var(--ds-border-w) var(--ds-border-style) var(--ds-border);
      border-radius: var(--ds-radius-2);
      background: var(--ds-bg-elevated);
      color: var(--ds-text);
      font-size: 12px;
      padding: 8px 10px;
      box-shadow: var(--ds-shadow-sm);
    }

    .toast.ok {
      border-color: color-mix(in oklab, var(--ds-success) 50%, var(--ds-border));
    }

    .toast.warn {
      border-color: color-mix(in oklab, var(--ds-warning) 50%, var(--ds-border));
    }

    .toast.err {
      border-color: color-mix(in oklab, var(--ds-danger) 50%, var(--ds-border));
    }

    .panel {
      grid-column: 1;
      grid-row: 1 / span 2;
    }

    .rail-spacer {
      flex: 1;
    }

    .timeline-bar .ds-btn {
      min-height: 30px;
      padding: 0;
      margin: 0;
      font-size: 0;
    }

    dialog.ds-modal {
      padding: 0;
      border: 0;
      background: transparent;
      width: 100%;
      max-width: 100%;
    }

    dialog.ds-modal[open] {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      margin: 0;
    }

    dialog.ds-modal::backdrop {
      background: color-mix(in oklab, var(--ds-bg) 55%, transparent);
      backdrop-filter: blur(2px);
    }

    @media (max-width: 1080px) {
      .shell {
        grid-template-columns: 1fr;
        grid-template-rows: 40% 1fr auto;
      }
      .panel {
        grid-column: 1;
        grid-row: 2;
        min-height: 320px;
      }
      .panel-body {
        grid-template-columns: 40px 1fr;
      }
      .viewer {
        grid-column: 1;
        grid-row: 1;
      }
      .timeline-bar {
        grid-column: 1;
        grid-row: 3;
        grid-template-columns: 34px 34px 34px 120px 1fr;
      }
    }
  </style>
</head>
<body>
  <main class="shell">
    <section class="panel">
      <header class="header">
        <h1 class="title">TREKTEK</h1>
        <span class="subtle">v0.1 wireframe</span>
      </header>
      <div class="panel-body">
      <div class="tabs">
        <button class="ds-btn tab-btn is-active" id="tabMapping" data-tab="mapping" aria-selected="true" title="Mapping"><i class="iconoir-map" aria-hidden="true"></i></button>
        <button class="ds-btn tab-btn" id="tabRaw" data-tab="raw" aria-selected="false" title="Raw JSON"><i class="iconoir-code" aria-hidden="true"></i></button>
        <button class="ds-btn tab-btn" id="tabData" data-tab="data" aria-selected="false" title="Data and Import"><i class="iconoir-database" aria-hidden="true"></i></button>
        <button class="ds-btn tab-btn" id="tabRendering" data-tab="rendering" aria-selected="false" title="Rendering"><i class="iconoir-view-grid" aria-hidden="true"></i></button>
        <button class="ds-btn tab-btn" id="tabExport" data-tab="export" aria-selected="false" title="Export"><i class="iconoir-upload-data-window" aria-hidden="true"></i></button>
        <div class="rail-spacer"></div>
        <button class="ds-btn tab-btn" id="tabSettings" data-tab="settings" aria-selected="false" title="Settings"><i class="iconoir-settings" aria-hidden="true"></i></button>
      </div>
      <div class="controls">
        <section class="control-tab" id="panelMapping" data-tab-panel="mapping">
          <div class="mapping-route-row">
            <div class="btn-row">
              <button class="ds-btn ds-btn-danger" id="clearRoute">Clear Route</button>
              <button class="ds-btn" id="refreshRaw" title="Refresh raw JSON preview">JSON</button>
              <button class="ds-btn ds-btn-primary" id="sampleRoute">Route</button>
            </div>
            <div id="pinParseStatus" class="panel-status">Ready.</div>
          </div>
          <div class="group">
            <div class="group-head">
              <h3>Add Pins</h3>
              <button class="ds-btn panel-help" type="button" data-help="Paste CSV rows or Google Maps links, then use Add Pins. Successful rows are removed from the input." title="Help"><i class="iconoir-info-circle"></i></button>
            </div>
            <textarea id="pinData" class="ds-textarea" placeholder="Paste rows as: lat,lng,label,timestamp,note&#10;or paste Google Maps share links (one per line)">37.7749,-122.4194,San Francisco
34.0522,-118.2437,Los Angeles
36.1699,-115.1398,Las Vegas
40.7608,-111.8910,Salt Lake City
47.6062,-122.3321,Seattle</textarea>
            <div class="btn-row">
              <button class="ds-btn" id="clearInput">Clear Input</button>
              <button class="ds-btn" id="parsePreview">Preview</button>
              <button class="ds-btn ds-btn-primary" id="loadPins">Add Pins</button>
            </div>
          </div>
          <div class="group pins-meta-group">
            <div class="group-head">
              <h3>Pins + Metadata</h3>
              <button class="ds-btn panel-help" type="button" data-help="Select a pin from the list to edit metadata. Save activates only after changes." title="Help"><i class="iconoir-info-circle"></i></button>
            </div>
            <div id="pinList" class="pin-list">
              <table class="pin-table" aria-label="Journey pins">
                <thead>
                  <tr>
                    <th style="width: 38%;">Label</th>
                    <th style="width: 23%;">Lat</th>
                    <th style="width: 23%;">Lng</th>
                    <th style="width: 16%;">Src</th>
                  </tr>
                </thead>
                <tbody id="pinTableBody"></tbody>
              </table>
            </div>
            <div class="metadata-block">
              <input id="pinLabel" class="ds-input" type="text" placeholder="Pin label">
              <input id="pinTimestamp" class="ds-input" type="datetime-local" title="Timestamp">
              <textarea id="pinNote" class="ds-textarea" rows="3" style="min-height: 74px;" placeholder="Pin note"></textarea>
              <div id="pinSource"></div>
            </div>
            <div class="meta-actions">
              <button class="ds-btn ds-btn-danger" id="deletePin">Delete</button>
              <button class="ds-btn" id="cancelPinMeta" disabled>Cancel</button>
              <button class="ds-btn ds-btn-primary" id="savePinMeta" disabled>Save</button>
            </div>
          </div>
        </section>

        <section class="control-tab" id="panelRendering" data-tab-panel="rendering" hidden>
          <div class="group">
            <div class="group-head">
              <h3>Rendering Controls</h3>
              <button class="ds-btn panel-help" type="button" data-help="Colors are direct pickers. Symbol sliders control glow, height, opacity, width, and size." title="Help"><i class="iconoir-info-circle"></i></button>
            </div>
            <div class="render-stack">
              <section class="render-group">
                <h4>Terrain</h4>
                <div class="render-row color-only">
                  <input id="terrainColor" type="color" value="#3cd7ff" title="Terrain color">
                </div>
                <div class="render-row">
                  <span class="mini-key" title="Glow"><i class="iconoir-half-moon" aria-hidden="true"></i></span>
                  <input id="terrainGlow" type="range" min="0" max="2.5" value="1.1" step="0.1" title="Terrain glow">
                </div>
                <div class="render-row">
                  <span class="mini-key" title="Height"><i class="iconoir-ruler-combine" aria-hidden="true"></i></span>
                  <input id="terrainHeight" type="range" min="0.2" max="2.8" value="1.2" step="0.1" title="Terrain height">
                </div>
                <div class="render-row">
                  <span class="mini-key" title="Wire opacity"><i class="iconoir-transparency-grid" aria-hidden="true"></i></span>
                  <input id="wireOpacity" type="range" min="0.05" max="1" value="0.65" step="0.05" title="Wire opacity">
                </div>
              </section>

              <section class="render-group">
                <h4>Path</h4>
                <div class="render-row color-only">
                  <input id="pathColor" type="color" value="#8dffcf" title="Path color">
                </div>
                <div class="render-row">
                  <span class="mini-key" title="Width"><i class="iconoir-line-space" aria-hidden="true"></i></span>
                  <input id="pathWidth" type="range" min="1" max="7" value="3" step="0.5" title="Path width">
                </div>
              </section>

              <section class="render-group">
                <h4>Pin</h4>
                <div class="render-row color-only">
                  <input id="pinColor" type="color" value="#f2fdff" title="Pin color">
                </div>
                <div class="render-row">
                  <span class="mini-key" title="Size"><i class="iconoir-diameter" aria-hidden="true"></i></span>
                  <input id="pinSize" type="range" min="2" max="12" value="6" step="1" title="Pin size">
                </div>
              </section>
            </div>
          </div>

          <div class="group">
            <div class="group-head">
              <h3>Camera Controls</h3>
              <button class="ds-btn panel-help" type="button" data-help="Left drag to orbit, middle drag to track, wheel to zoom. Use presets for cardinal and isometric views." title="Help"><i class="iconoir-info-circle"></i></button>
            </div>
            <div class="camera-stack">
              <div class="camera-row">
                <span class="mini-key" title="Yaw"><i class="iconoir-rotate-camera-right" aria-hidden="true"></i></span>
                <input id="cameraYaw" type="range" min="-3.14" max="3.14" value="-0.76" step="0.01" title="Yaw">
              </div>
              <div class="camera-row">
                <span class="mini-key" title="Pitch"><i class="iconoir-view-360" aria-hidden="true"></i></span>
                <input id="cameraPitch" type="range" min="0.30" max="1.45" value="0.93" step="0.01" title="Pitch">
              </div>
              <div class="camera-row">
                <span class="mini-key" title="Zoom"><i class="iconoir-search" aria-hidden="true"></i></span>
                <input id="cameraZoom" type="range" min="1.4" max="9.5" value="3.4" step="0.1" title="Zoom">
              </div>
              <div class="camera-row">
                <span class="mini-key" title="Pedestal"><i class="iconoir-align-bottom-box" aria-hidden="true"></i></span>
                <input id="cameraPedestal" type="range" min="-1.2" max="1.2" value="0" step="0.02" title="Pedestal">
              </div>
              <div class="camera-row">
                <span class="mini-key" title="Focal length"><i class="iconoir-camera" aria-hidden="true"></i></span>
                <input id="cameraFocal" type="range" min="18" max="120" value="50" step="1" title="Focal length">
              </div>
              <div class="camera-row">
                <span class="mini-key" title="Lens angle"><i class="iconoir-diameter" aria-hidden="true"></i></span>
                <input id="cameraLens" type="range" min="22" max="95" value="58" step="1" title="Lens angle">
              </div>
              <div class="camera-actions">
                <button class="ds-btn" id="resetCamera" title="Reset camera"><i class="iconoir-undo" aria-hidden="true"></i></button>
              </div>
              <div class="camera-presets">
                <button class="ds-btn" id="viewHome" title="Home view"><i class="iconoir-home" aria-hidden="true"></i></button>
                <button class="ds-btn" id="viewFit" title="Fit map to frame"><i class="iconoir-frame-select" aria-hidden="true"></i></button>
                <button class="ds-btn" id="viewIso" title="Isometric"><i class="iconoir-cube-bandage" aria-hidden="true"></i></button>
                <button class="ds-btn" id="viewTop" title="Top"><i class="iconoir-nav-arrow-up" aria-hidden="true"></i></button>
                <button class="ds-btn" id="viewBottom" title="Bottom"><i class="iconoir-nav-arrow-down" aria-hidden="true"></i></button>
                <button class="ds-btn" id="viewLeft" title="Left"><i class="iconoir-nav-arrow-left" aria-hidden="true"></i></button>
                <button class="ds-btn" id="viewRight" title="Right"><i class="iconoir-nav-arrow-right" aria-hidden="true"></i></button>
                <button class="ds-btn" id="viewFront" title="Front"><i class="iconoir-view-grid" aria-hidden="true"></i></button>
                <button class="ds-btn" id="viewBack" title="Back"><i class="iconoir-view-columns-3" aria-hidden="true"></i></button>
              </div>
            </div>
          </div>
        </section>

        <section class="control-tab" id="panelData" data-tab-panel="data" hidden>
          <div class="group">
            <div class="group-head">
              <h3>Map Settings + Open Data</h3>
              <button class="ds-btn panel-help" type="button" data-help="Load country outlines from open map sources. Re-run Route after pin changes." title="Help"><i class="iconoir-info-circle"></i></button>
            </div>
            <label for="countryName">Country outline (Nominatim + Overpass)</label>
            <div class="row">
              <input id="countryName" class="ds-input" type="text" value="United States">
              <button class="ds-btn" id="loadCountry">Outline</button>
            </div>
          </div>
          <div class="group">
            <h3>Import Tools</h3>
            <div class="footer">Phase 1 placeholder. Google Maps paste/import panel will be added in Phase 2.</div>
          </div>
        </section>

        <section class="control-tab" id="panelExport" data-tab-panel="export" hidden>
          <div class="group">
            <h3>Export</h3>
            <div class="btn-row">
              <button class="ds-btn ds-btn-primary" id="exportPng">PNG</button>
            </div>
            <div id="exportStatus" class="panel-status">Ready.</div>
          </div>
        </section>

        <section class="control-tab" id="panelRaw" data-tab-panel="raw" hidden>
          <div class="group raw-json-group">
            <h3>Raw JSON</h3>
            <textarea id="rawJsonView" class="ds-textarea" readonly></textarea>
          </div>
        </section>

        <section class="control-tab" id="panelSettings" data-tab-panel="settings" hidden>
          <div class="group">
            <h3>Settings</h3>
            <label class="subtle" for="themeSelectApp">Theme</label>
            <select id="themeSelectApp" class="theme-switch ds-select" aria-label="Select app theme">
              <option value="steel-night">Steel Night</option>
              <option value="paper-mint">Paper Mint</option>
              <option value="amber-terminal">Amber Terminal</option>
              <option value="neon-grid">Neon Grid</option>
              <option value="mono-slate">Mono Slate</option>
              <option value="tech-grid">Tech Grid</option>
              <option value="skeuo-panel">Skeuo Panel</option>
              <option value="industrial-terminal">Industrial Terminal</option>
            </select>
          </div>
        </section>
      </div>
      </div>
    </section>

    <section class="viewer">
      <canvas id="view"></canvas>
      <div class="hud">
        <div id="hudPins">Pins: 0</div>
        <div id="hudPath">Path nodes: 0</div>
        <div id="hudTime">Timeline: 0%</div>
        <div id="hudCam">Cam: y -0.76 p 0.93 z 3.4</div>
        <div id="hudFps">FPS: --</div>
      </div>
    </section>

    <section class="timeline-bar">
      <button class="ds-btn ds-btn-primary" id="playPause" title="Play/Pause"><i class="iconoir-play-solid" aria-hidden="true"></i></button>
      <button class="ds-btn" id="reset" title="Reset timeline"><i class="iconoir-undo" aria-hidden="true"></i></button>
      <button class="ds-btn" id="timelineModeBtn" title="Timeline mode"><i class="iconoir-clock-rotate-right" aria-hidden="true"></i></button>
      <label class="subtle" for="speed" title="Playback speed">
        <input id="speed" type="range" min="0.1" max="4" value="1" step="0.1">
      </label>
      <div class="timeline-slider-wrap">
        <div class="timeline-track-wrap">
          <div id="timelineMarkers" class="timeline-markers" aria-hidden="false"></div>
          <input id="timeline" type="range" min="0" max="1000" value="0">
        </div>
      </div>
    </section>
  </main>

  <div id="toastWrap" class="toast-wrap" aria-live="polite" aria-atomic="true"></div>

  <dialog id="confirmDeleteDialog" class="ds-modal">
    <div class="ds-modal-panel ds-stack">
      <div>
        <h3 class="ds-card-title">Delete Pin?</h3>
        <p class="ds-muted">This removes the selected pin from the journey.</p>
      </div>
      <div class="ds-toolbar">
        <button class="ds-btn" id="cancelDeleteBtn" type="button">Cancel</button>
        <button class="ds-btn ds-btn-danger" id="confirmDeleteBtn" type="button">Delete</button>
      </div>
    </div>
  </dialog>

  <dialog id="helpDialog" class="ds-modal">
    <div class="ds-modal-panel ds-stack">
      <div>
        <h3 id="helpDialogTitle" class="ds-card-title">Panel Help</h3>
        <p id="helpDialogBody" class="ds-muted">No help text available.</p>
      </div>
      <div class="ds-toolbar">
        <button class="ds-btn ds-btn-primary" id="closeHelpDialogBtn" type="button">Close</button>
      </div>
    </div>
  </dialog>

  <script src="./trekulate_v0.1.js"></script>
</body>
</html>
